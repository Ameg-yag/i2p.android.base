apply plugin: 'java'

task buildJars(type: Exec) {
    outputs.dir('libs')
    commandLine 'ant', 'buildrouter'
}
compileJava.dependsOn buildJars

// TODO an empty routerjars.jar is added to the classpath

artifacts.add('default', file('libs/i2p.jar'))
artifacts.add('default', file('libs/router.jar'))
artifacts.add('default', file('libs/mstreaming.jar'))
artifacts.add('default', file('libs/streaming.jar'))
artifacts.add('default', file('libs/i2ptunnel.jar'))
artifacts.add('default', file('libs/addressbook.jar'))
artifacts.add('default', file('libs/BOB.jar'))

clean.dependsOn cleanBuildJars

clean << {
    exec {
        commandLine 'ant', 'clean'
    }
}